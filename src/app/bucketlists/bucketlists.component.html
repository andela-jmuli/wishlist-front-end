<div class="col-md-6 col-md-offset-3">
    <h2>Create Bucketlist</h2>
    <form name="form" (ngSubmit)="create_bucketlist()" #f="ngForm" novalidate>
        
        <div class="form-group">
            <label for="name">Bucketlist Name</label>
            <input type="text" class="form-control" name="name" [(ngModel)]="model.name" #name="ngModel" required />
            <div *ngIf="f.submitted && !name.valid" class="help-block">name is required</div>
        </div>
        <div class="form-group">
            <label for="description">Description</label>
            <input type="text" class="form-control" name="description" [(ngModel)]="model.description" #description="ngModel" required />
            
        </div>
        <div class="form-group">
            <button [disabled]="loading" class="btn btn-primary">Submit</button>
            <img *ngIf="loading" src="http://loading.io/loader/?use=eyJzaXplIjo2MCwic3BlZWQiOjEsImNiayI6IiNmZmZmZmYiLCJjMSI6IiMwMGIyZmYiLCJjMiI6IjEyIiwiYzMiOiI3IiwiYzQiOiIyMCIsImM1IjoiNSIsImM2IjoiMzAiLCJ0eXBlIjoiZGVmYXVsdCJ9" />
            <a [routerLink]="['/login']" class="btn btn-link">Cancel</a>
        </div>
    </form>
</div>

<div class="buck-body">
            <table class="table" *ngIf="bucketlists">
                <thead>
                    <tr>
                        <td>Name</td>
                        <td>Description</td>
                        
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let bucketlist of bucketlists; let i = index">
                        <td><a [routerLink]="['/bucketlists', bucketlist.id]">{{bucketlist.name}}</a></td>
                        <td>{{bucketlist.description}}</td>
                    <img *ngIf="loading" src="http://loading.io/loader/?use=eyJzaXplIjo2MCwic3BlZWQiOjEsImNiayI6IiNmZmZmZmYiLCJjMSI6IiMwMGIyZmYiLCJjMiI6IjEyIiwiYzMiOiI3IiwiYzQiOiIyMCIsImM1IjoiNSIsImM2IjoiMzAiLCJ0eXBlIjoiZGVmYXVsdCJ9" />    
        
        <button [disabled]="loading" class="btn btn-danger" (click)='deleteBucketlist(bucketlist.id)'><span class="glyphicon glyphicon-remove"></span></button> <br><br>

        <button class="btn btn-info" data-toggle="modal" [attr.data-target]="'#UpdateModal' + i"><span class="glyphicon glyphicon-edit"></span></button> <br><br>


                    <!-- Update Bucketlist Modal -->
                    <div class="modal fade" [id]="'UpdateModal' + i" role="dialog">
                    <div class="modal-dialog" >
                    <div class="modal-content">
                        <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        
                        </div>
                        <div class="modal-body">
                        <form class="form-group">
                            <label for="recipient-name" class="form-control-label">Name:</label>
                            <input type="text" class="form-control" [ngModel] = "bucketlist.name" name="name" #name="ngModel" required /><br><br>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" (click)='updateBucketlist(bucketlist.id, name.value)'>Update </button>
                        </form>
                        </div>
                    
                    </div>
                    </div>
                </div>    
                </tr>
                </tbody>
            </table>
            <p *ngIf="bucketlist && bucketlists.length==0"> You got no bucketlists mate!</p>
        </div>